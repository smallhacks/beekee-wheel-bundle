(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var ECMAScript = Package.ecmascript.ECMAScript;
var meteorInstall = Package.modules.meteorInstall;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var Base64;

var require = meteorInstall({"node_modules":{"meteor":{"base64":{"base64.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                        //
// packages/base64/base64.js                                                              //
//                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////
                                                                                          //
module.export({
  Base64: () => Base64
});
// Base 64 encoding
const BASE_64_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
const BASE_64_VALS = Object.create(null);

const getChar = val => BASE_64_CHARS.charAt(val);

const getVal = ch => ch === '=' ? -1 : BASE_64_VALS[ch];

for (let i = 0; i < BASE_64_CHARS.length; i++) {
  BASE_64_VALS[getChar(i)] = i;
}

;

const encode = array => {
  if (typeof array === "string") {
    const str = array;
    array = newBinary(str.length);

    for (let i = 0; i < str.length; i++) {
      const ch = str.charCodeAt(i);

      if (ch > 0xFF) {
        throw new Error("Not ascii. Base64.encode can only take ascii strings.");
      }

      array[i] = ch;
    }
  }

  const answer = [];
  let a = null;
  let b = null;
  let c = null;
  let d = null;

  for (let i = 0; i < array.length; i++) {
    switch (i % 3) {
      case 0:
        a = array[i] >> 2 & 0x3F;
        b = (array[i] & 0x03) << 4;
        break;

      case 1:
        b = b | array[i] >> 4 & 0xF;
        c = (array[i] & 0xF) << 2;
        break;

      case 2:
        c = c | array[i] >> 6 & 0x03;
        d = array[i] & 0x3F;
        answer.push(getChar(a));
        answer.push(getChar(b));
        answer.push(getChar(c));
        answer.push(getChar(d));
        a = null;
        b = null;
        c = null;
        d = null;
        break;
    }
  }

  if (a != null) {
    answer.push(getChar(a));
    answer.push(getChar(b));

    if (c == null) {
      answer.push('=');
    } else {
      answer.push(getChar(c));
    }

    if (d == null) {
      answer.push('=');
    }
  }

  return answer.join("");
}; // XXX This is a weird place for this to live, but it's used both by
// this package and 'ejson', and we can't put it in 'ejson' without
// introducing a circular dependency. It should probably be in its own
// package or as a helper in a package that both 'base64' and 'ejson'
// use.


const newBinary = len => {
  if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined') {
    const ret = [];

    for (let i = 0; i < len; i++) {
      ret.push(0);
    }

    ret.$Uint8ArrayPolyfill = true;
    return ret;
  }

  return new Uint8Array(new ArrayBuffer(len));
};

const decode = str => {
  let len = Math.floor(str.length * 3 / 4);

  if (str.charAt(str.length - 1) == '=') {
    len--;

    if (str.charAt(str.length - 2) == '=') {
      len--;
    }
  }

  const arr = newBinary(len);
  let one = null;
  let two = null;
  let three = null;
  let j = 0;

  for (let i = 0; i < str.length; i++) {
    const c = str.charAt(i);
    const v = getVal(c);

    switch (i % 4) {
      case 0:
        if (v < 0) {
          throw new Error('invalid base64 string');
        }

        one = v << 2;
        break;

      case 1:
        if (v < 0) {
          throw new Error('invalid base64 string');
        }

        one = one | v >> 4;
        arr[j++] = one;
        two = (v & 0x0F) << 4;
        break;

      case 2:
        if (v >= 0) {
          two = two | v >> 2;
          arr[j++] = two;
          three = (v & 0x03) << 6;
        }

        break;

      case 3:
        if (v >= 0) {
          arr[j++] = three | v;
        }

        break;
    }
  }

  return arr;
};

const Base64 = {
  encode,
  decode,
  newBinary
};
////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{
  "extensions": [
    ".js",
    ".json"
  ]
});

var exports = require("/node_modules/meteor/base64/base64.js");

/* Exports */
Package._define("base64", exports, {
  Base64: Base64
});

})();

//# sourceURL=meteor://ðŸ’»app/packages/base64.js
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGVvcjovL/CfkrthcHAvcGFja2FnZXMvYmFzZTY0L2Jhc2U2NC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnQiLCJCYXNlNjQiLCJCQVNFXzY0X0NIQVJTIiwiQkFTRV82NF9WQUxTIiwiT2JqZWN0IiwiY3JlYXRlIiwiZ2V0Q2hhciIsInZhbCIsImNoYXJBdCIsImdldFZhbCIsImNoIiwiaSIsImxlbmd0aCIsImVuY29kZSIsImFycmF5Iiwic3RyIiwibmV3QmluYXJ5IiwiY2hhckNvZGVBdCIsIkVycm9yIiwiYW5zd2VyIiwiYSIsImIiLCJjIiwiZCIsInB1c2giLCJqb2luIiwibGVuIiwiVWludDhBcnJheSIsIkFycmF5QnVmZmVyIiwicmV0IiwiJFVpbnQ4QXJyYXlQb2x5ZmlsbCIsImRlY29kZSIsIk1hdGgiLCJmbG9vciIsImFyciIsIm9uZSIsInR3byIsInRocmVlIiwiaiIsInYiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWM7QUFBQ0MsUUFBTSxFQUFDLE1BQUlBO0FBQVosQ0FBZDtBQUFBO0FBRUEsTUFBTUMsYUFBYSxHQUFHLGtFQUF0QjtBQUVBLE1BQU1DLFlBQVksR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsSUFBZCxDQUFyQjs7QUFFQSxNQUFNQyxPQUFPLEdBQUdDLEdBQUcsSUFBSUwsYUFBYSxDQUFDTSxNQUFkLENBQXFCRCxHQUFyQixDQUF2Qjs7QUFDQSxNQUFNRSxNQUFNLEdBQUdDLEVBQUUsSUFBSUEsRUFBRSxLQUFLLEdBQVAsR0FBYSxDQUFDLENBQWQsR0FBa0JQLFlBQVksQ0FBQ08sRUFBRCxDQUFuRDs7QUFFQSxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdULGFBQWEsQ0FBQ1UsTUFBbEMsRUFBMENELENBQUMsRUFBM0MsRUFBK0M7QUFDN0NSLGNBQVksQ0FBQ0csT0FBTyxDQUFDSyxDQUFELENBQVIsQ0FBWixH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QUFnQ0Q7O0FBRUQsU0FBT0wsR0FBUDtBQUNELENBdkREOztBQXlETyxNQUFNakMsTUFBTSxHQUFHO0FBQUVZLFFBQUY7QUFBVWtCLFFBQVY7QUFBa0JmO0FBQWxCLENBQWYsQyIsImZpbGUiOiIvcGFja2FnZXMvYmFzZTY0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQmFzZSA2NCBlbmNvZGluZ1xuXG5jb25zdCBCQVNFXzY0X0NIQVJTID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XG5cbmNvbnN0IEJBU0VfNjRfVkFMUyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmNvbnN0IGdldENoYXIgPSB2YWwgPT4gQkFTRV82NF9DSEFSUy5jaGFyQXQodmFsKTtcbmNvbnN0IGdldFZhbCA9IGNoID0+IGNoID09PSAnPScgPyAtMSA6IEJBU0VfNjRfVkFMU1tjaF07XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgQkFTRV82NF9DSEFSUy5sZW5ndGg7IGkrKykge1xuICBCQVNFXzY0X1ZBTFNbZ2V0Q2hhcihpKV0gPSBpO1xufTtcblxuY29uc3QgZW5jb2RlID0gYXJyYXkgPT4ge1xuICBpZiAodHlwZW9mIGFycmF5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3Qgc3RyID0gYXJyYXk7XG4gICAgYXJyYXkgPSBuZXdCaW5hcnkoc3RyLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICBpZiAoY2ggPiAweEZGKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIk5vdCBhc2NpaS4gQmFzZTY0LmVuY29kZSBjYW4gb25seSB0YWtlIGFzY2lpIHN0cmluZ3MuXCIpO1xuICAgICAgfVxuXG4gICAgICBhcnJheVtpXSA9IGNoO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFuc3dlciA9IFtdO1xuICBsZXQgYSA9IG51bGw7XG4gIGxldCBiID0gbnVsbDtcbiAgbGV0IGMgPSBudWxsO1xuICBsZXQgZCA9IG51bGw7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaCAoaSAlIDMpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgYSA9IChhcnJheVtpXSA+PiAyKSAmIDB4M0Y7XG4gICAgICAgIGIgPSAoYXJyYXlbaV0gJiAweDAzKSA8PCA0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgYiA9IGIgfCAoYXJyYXlbaV0gPj4gNCkgJiAweEY7XG4gICAgICAgIGMgPSAoYXJyYXlbaV0gJiAweEYpIDw8IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBjID0gYyB8IChhcnJheVtpXSA+PiA2KSAmIDB4MDM7XG4gICAgICAgIGQgPSBhcnJheVtpXSAmIDB4M0Y7XG4gICAgICAgIGFuc3dlci5wdXNoKGdldENoYXIoYSkpO1xuICAgICAgICBhbnN3ZXIucHVzaChnZXRDaGFyKGIpKTtcbiAgICAgICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihjKSk7XG4gICAgICAgIGFuc3dlci5wdXNoKGdldENoYXIoZCkpO1xuICAgICAgICBhID0gbnVsbDtcbiAgICAgICAgYiA9IG51bGw7XG4gICAgICAgIGMgPSBudWxsO1xuICAgICAgICBkID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGEgIT0gbnVsbCkge1xuICAgIGFuc3dlci5wdXNoKGdldENoYXIoYSkpO1xuICAgIGFuc3dlci5wdXNoKGdldENoYXIoYikpO1xuICAgIGlmIChjID09IG51bGwpIHtcbiAgICAgIGFuc3dlci5wdXNoKCc9Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuc3dlci5wdXNoKGdldENoYXIoYykpO1xuICAgIH1cblxuICAgIGlmIChkID09IG51bGwpIHtcbiAgICAgIGFuc3dlci5wdXNoKCc9Jyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFuc3dlci5qb2luKFwiXCIpO1xufTtcblxuXG5cbi8vIFhYWCBUaGlzIGlzIGEgd2VpcmQgcGxhY2UgZm9yIHRoaXMgdG8gbGl2ZSwgYnV0IGl0J3MgdXNlZCBib3RoIGJ5XG4vLyB0aGlzIHBhY2thZ2UgYW5kICdlanNvbicsIGFuZCB3ZSBjYW4ndCBwdXQgaXQgaW4gJ2Vqc29uJyB3aXRob3V0XG4vLyBpbnRyb2R1Y2luZyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kuIEl0IHNob3VsZCBwcm9iYWJseSBiZSBpbiBpdHMgb3duXG4vLyBwYWNrYWdlIG9yIGFzIGEgaGVscGVyIGluIGEgcGFja2FnZSB0aGF0IGJvdGggJ2Jhc2U2NCcgYW5kICdlanNvbidcbi8vIHVzZS5cbmNvbnN0IG5ld0JpbmFyeSA9IGxlbiA9PiB7XG4gIGlmICh0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IHJldCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHJldC5wdXNoKDApO1xuICAgIH1cblxuICAgIHJldC4kVWludDhBcnJheVBvbHlmaWxsID0gdHJ1ZTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG4gIHJldHVybiBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIobGVuKSk7XG59O1xuXG5jb25zdCBkZWNvZGUgPSBzdHIgPT4ge1xuICBsZXQgbGVuID0gTWF0aC5mbG9vcigoc3RyLmxlbmd0aCAqIDMpIC8gNCk7XG4gIGlmIChzdHIuY2hhckF0KHN0ci5sZW5ndGggLSAxKSA9PSAnPScpIHtcbiAgICBsZW4tLTtcbiAgICBpZiAoc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMikgPT0gJz0nKSB7XG4gICAgICBsZW4tLTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBhcnIgPSBuZXdCaW5hcnkobGVuKTtcblxuICBsZXQgb25lID0gbnVsbDtcbiAgbGV0IHR3byA9IG51bGw7XG4gIGxldCB0aHJlZSA9IG51bGw7XG5cbiAgbGV0IGogPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYyA9IHN0ci5jaGFyQXQoaSk7XG4gICAgY29uc3QgdiA9IGdldFZhbChjKTtcbiAgICBzd2l0Y2ggKGkgJSA0KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGlmICh2IDwgMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBiYXNlNjQgc3RyaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBvbmUgPSB2IDw8IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAodiA8IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYmFzZTY0IHN0cmluZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25lID0gb25lIHwgKHYgPj4gNCk7XG4gICAgICAgIGFycltqKytdID0gb25lO1xuICAgICAgICB0d28gPSAodiAmIDB4MEYpIDw8IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBpZiAodiA+PSAwKSB7XG4gICAgICAgICAgdHdvID0gdHdvIHwgKHYgPj4gMik7XG4gICAgICAgICAgYXJyW2orK10gPSB0d287XG4gICAgICAgICAgdGhyZWUgPSAodiAmIDB4MDMpIDw8IDY7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaWYgKHYgPj0gMCkge1xuICAgICAgICAgIGFycltqKytdID0gdGhyZWUgfCB2O1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFycjtcbn07XG5cbmV4cG9ydCBjb25zdCBCYXNlNjQgPSB7IGVuY29kZSwgZGVjb2RlLCBuZXdCaW5hcnkgfTtcbiJdfQ==
